<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>Visualizing OpenCV Images on GDB</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="http://www.renatogarcia.blog.br//media/css/style.css" />
    <link rel="stylesheet" type="text/css" href="http://www.renatogarcia.blog.br//media/css/code.css" />
  </head>
  <body>

    <div class="page">

      <div class="header">
        <span class="title">Renato Garcia</span>
        <ul>
          
          <li class="selected"><a href="http://www.renatogarcia.blog.br//en/index.html">Blog</a></li>
          <li ><a href="http://www.renatogarcia.blog.br//en/projects.html">Projects</a></li>
          <li ><a href="http://www.renatogarcia.blog.br//en/about.html">About</a></li>
          
        </ul>
      </div>

      <div class="page_body">
        <div class="translation">
          
          <a href=http://www.renatogarcia.blog.br/pt/posts/visualizando_imagens_opencv_no_gdb.html>PortuguÃªs
            
          </a>
        </div>
        
<div class="post">
  <h1>Visualizing OpenCV Images on GDB</h1>
  
  <div class="post_date">October 2, 2014</div>
  
  <p>On debugging programs, be it with GDB or any other debugger, if some variable
represents a picture, to inspect it printing its content as a number sequence or
character sequence is not that useful.</p>
<div class="figure">
<img alt="../../media/img/woman_in_red_bin.png" src="../../media/img/woman_in_red_bin.png" />
<p class="caption">Except if you can see a woman in red above, that output is not much
clarifying about the state of <code>matImg</code> variable.</p>
</div>
<p>A little better option than simply to print an image as a byte array, would be a
variation of &quot;printf debugging&quot;. Using the functions from OpenCV library as an
example, the code bellow will open a window with the image on <code>mat</code>
variable, and wait until some key be pressed.</p>
<div class="code_box"><pre><span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">&quot;window&quot;</span><span class="p">,</span> <span class="n">mat</span><span class="p">);</span>
<span class="n">cv</span><span class="o">::</span><span class="n">waitKey</span><span class="p">();</span>
</pre><div class="caption"><span class="code_language">C++</span></div></div><p>It's simple, it's works, but it has all the same drawbacks of the conventional
&quot;printf debugging&quot; method. The ideal solution would be to get the same result as
above, but through an internal GDB command.</p>
<p>Trying don't to reinvent the wheel, I have managed to found a GDB extension,
created by Stefano Pellegrini, that implements much of the desired functionality
to <code>cv::Mat</code> objects. Great! Starting from this version, I have added
IplImage support, ROIs support, and some other features, having now a pretty
good way of debugging programs which uses OpenCV images.</p>
<div class="figure">
<img alt="../../media/img/48072cfb-aa5f-4624-8d73-c0f2d69a33ad_2.png" src="../../media/img/48072cfb-aa5f-4624-8d73-c0f2d69a33ad_2.png" />
<p class="caption">Since the extension is installed, will be a new GDB command to show the
image in a window.</p>
</div>
<p>This extension will register a new GDB command, <code>cv_imshow</code>, which
receives as argument a variable containing the image that must be shown. Firstly
I had considered to use the <a class="reference external" href="http://sourceware.org/gdb/current/onlinedocs/gdb/Pretty-Printing.html#Pretty-Printing">pretty printing</a> mechanism in place of to create a
new command, but that would not be the better choice. Even restricted to OpenCV
image types, not all formats are compatible to be shown. Therefore is yet useful
to have at least the traditional GDB <code>print</code> command as a last resource to
inspect a variable, if it cannot be graphically inspected.</p>
<p>The source code, as well as the instructions to compile and install the
extension can be found at the project <a class="reference external" href="https://github.com/renatoGarcia/gdb-imshow">github repository</a>.</p>

</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'renatogarciablog';
  var disqus_identifier = '48072cfb-aa5f-4624-8d73-c0f2d69a33ad-en';
  <!-- var disqus_url = 'http://renatogarcia.blog.br//home/renatofg/programming/blog_caligari/content/en/posts/visualizing_opencv_images_on_gdb.rst'; -->
  var disqus_developer = 0; // if 1 developer mode is on
  var disqus_title = 'Visualizing OpenCV Images on GDB';

  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </div>

      </div>
    </body>
  </html>